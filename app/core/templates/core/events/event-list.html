{% extends "core/base.html" %}

{% block content %}
<div class="container my-5">
	<h1 class="mb-4 text-center">Upcoming Events</h1>

	{% if eventi %}
	<div class="row row-cols-1 row-cols-md-2 g-4">
		{% for Evento in eventi %}
		<div class="col">
			<div class="card shadow-sm h-100">
				<div class="card-body">
					<h3 class="card-title">{{ Evento.title }}</h3>
					<p class="card-text">{{ Evento.description }}</p>
					<ul class="list-group list-group-flush mb-3">
						<li class="list-group-item"><strong>Date:</strong> {{ Evento.date|date:"d/m/Y" }}</li>
						<li class="list-group-item"><strong>Available seats:</strong> {{ Evento.seats }}</li>
					</ul>
					{% if user.is_authenticated %}
					<form method="post" action="{% url 'event_subscription' Evento.id %}">
						{% csrf_token %}
						<div class="mb-3">
							<label for="partecipanti_{{ Evento.id }}" class="form-label">Number of participants:</label>
							<input type="number" id="partecipanti_{{ Evento.id }}" name="partecipanti" value="1" min="1"
								class="form-control w-50 d-inline-block">
						</div>
						<button type="submit" class="btn btn-primary">Sign up</button>
					</form>
					{% else %}
					<div class="alert alert-info mt-3">
						<a href="{% url 'login' %}">Log in</a> to sign up
					</div>
					{% endif %}
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
	{% else %}
	<div class="alert alert-warning text-center mt-5">
		No upcoming events available.
	</div>
	{% endif %}
</div>
{% endblock %}