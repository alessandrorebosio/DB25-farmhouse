{% extends "core/base.html" %}

{% block content %}
<h1>Eventi Futuri</h1>

{% if eventi %}
  <ul>
    {% for Evento in eventi %}
      <li class="mb-4 border p-3 rounded">
        <h3>{{ Evento.title }}</h3>
        <p>{{ Evento.description }}</p>
        <p><strong>Data:</strong> {{ Evento.date|date:"d/m/Y" }}</p>
        <p><strong>Posti disponibili:</strong> {{ Evento.seats }}</p>

        {% if user.is_authenticated %}
          <form method="post" action="{% url 'iscrizione-evento' Evento.id %}">
            {% csrf_token %}
            <label for="partecipanti_{{ Evento.id }}">Numero partecipanti:</label>
            <input type="number" id="partecipanti_{{ Evento.id }}" name="partecipanti" value="1" min="1" class="form-control w-25 d-inline">
            <button type="submit" class="btn btn-primary">Iscriviti</button>
          </form>
        {% else %}
          <p><a href="{% url 'login' %}">Accedi</a> per iscriverti</p>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>Nessun evento futuro disponibile.</p>
{% endif %}

{% endblock %}
